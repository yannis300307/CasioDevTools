<!DOCTYPE html>
<html>

<head>
    <style>
        .title {
            text-align: center;
        }

        .base_button {
            display: block;
            border: none;
            height: 2em;
            width: 60%;
            background: var(--vscode-button-background);
            color: white;
            border-radius: 0.2em;
            outline-color: var(--vscode-button-border);
            margin-top: 1em;
            margin-bottom: 1em;
            margin-right: auto;
            margin-left: auto;
            float: center;
        }

        .base_button:hover:enabled {
            background: var(--vscode-button-hoverBackground);
        }

        .base_button:active:enabled {
            outline: double var(--vscode-button-hoverBackground);
        }

        .base_button:disabled {
            background-color: grey;
        }

        .start_emul_container button,
        select {
            background-color: var(--vscode-input-background);
            border: 1px var(--vscode-input-border);
            outline: 1px solid var(--vscode-input-border);
            border-radius: 0px;
            color: var(--vscode-input-foreground);
            margin: 0px;
            height: 1.8em;
        }

        #emul_acion {
            width: 20em;
        }

        #emul_action_list:focus {
            outline: 1px solid var(--vscode-inputOption-activeBorder);
        }

        #emul_button {
            color: #89d185;
            font-weight: bold;
        }

        #emul_button:active {
            outline: double var(--vscode-input-border);
        }
    </style>
    <script>
        window.addEventListener('load', function () {
            const vscode = acquireVsCodeApi();

            console.log("working !");

            document.querySelector('#create_project').addEventListener('click', () => {
                vscode.postMessage({ type: 'create_project' });
            });

            /*document.querySelector('.install_emulator_button').addEventListener('click', () => {
                vscode.postMessage({ type: 'install_fxsdk' });
            });*/

            document.querySelector('#emul_button').addEventListener('click', () => {
                const combo_value = document.getElementById('emul_action_list').value;
                switch (combo_value) {
                    case "0": // run
                        {
                            vscode.postMessage({ type: 'start_emulator', compile: false });
                            break;
                        }
                    case "1": // compile and run
                        {
                            vscode.postMessage({ type: 'start_emulator', compile: true });
                            break;
                        }
                }

            })


            window.addEventListener('message', event => {
                const message = event.data; // The json data that the extension sent
                switch (message.type) {
                    case 'unlock':
                        {
                            document.querySelector("#need_emulator").hidden = false;
                            document.querySelector("#unavailable").hidden = true;
                            console.log("Unlocked Emulator webview !")
                            break;
                        }
                }
            });
            // Send a message to the webview provider to unlock the webview if The Emulator is installed.
            vscode.postMessage({ type: 'check_for_emulator_installed' });
        });
    </script>
</head>

<body>
    <h2 class="title">Emulate and Transfert</h2>

    <div id="main">
        <h3>Emulator:</h3>
        <div class="need_emulator" hidden>
            <button id="emu_button" class="start_emu_button base_button">Launch CG-50 / Graph90+e emulator</button>
        </div>
        <div class="start_emul_container">
            <button id="emul_button">â–·</button><select name="thelist" id="emul_action_list">
                <option value="0">Run Emulator</option>
                <option value="1">Compile and run</option>
            </select>
        </div>
        <h3>Transfert to Calculator:</h3>
        <button id="transfert_copy" class="base_button">Transfert with copy</button>
        <button id="transfert_push" class="base_button" disabled title="Only available on Linux (not WSL)">Transfert with Addin-Push</button>
    </div>


</body>

</html>